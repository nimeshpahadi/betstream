:80 {
    root * /usr/share/caddy

    @api path_prefix /api
    reverse_proxy @api backend:3001

    @sse path /sse
    reverse_proxy @sse backend:3001 {
        flush_interval -1
        header_up Host {host}
        header_up Connection keep-alive
        header_up Cache-Control no-cache
        header_up Accept text/event-stream
        header_down -Server
    }

    try_files {path} /index.html
    file_server
}
